DECLARE CAMP[8]
CAMP[1]='MARCA'
CAMP[2]='CODIGO'
CAMP[3]='DETALLE'
CAMP[4]='CODIGBARRA'
CAMP[5]='PCOSTO'
CAMP[6]='GANANCIA'
CAMP[7]='SINIVA'
CAMP[8]='CONIVA'


DECLARE TIPO[8]
TIPO[1]='C'
TIPO[2]='N'
TIPO[3]='C'
TIPO[4]='N'
TIPO[5]='N'
TIPO[6]='N'
TIPO[7]='N'
TIPO[8]='N'

DECLARE LON[8]
LON[1]=1
LON[2]=6
LON[3]=60
LON[4]=14
LON[5]=8
LON[6]=3
LON[7]=8
LON[8]=8

DECLARE DECI[8]
DECI[1]=0
DECI[2]=0
DECI[3]=0
DECI[4]=0
DECI[5]=2
DECI[6]=0
DECI[7]=2
DECI[8]=2


ERASE MERNEW.DBF
ERASE TEMP.DBF

CREATE TEMP
store 1 to I

do while .t.
   APPEND BLANK
   REPLACE field_name with CAMP[I]
   REPLACE field_type with tipo[I]
   REPLACE field_len with lon[I]
   REPLACE field_dec with deci[I]

   if i=8
     exit
   endif

   store i+1 to i
   loop
enddo

CREATE MERNEW FROM TEMP
ERASE TEMP.DBF
 


STORE SPACE(30) TO DETALLE
STORE 0 TO VCODIGBARRA
STORE 0 TO VPCOSTO
STORE 0 TO VGANANCIA
STORE 0 TO VSINIVA
STORE 0 TO VCONIVA




STORE 1 TO IR

DO WHILE .T.
  USE MERCA
  GO IR
  IF EOF()
    EXIT
  ENDIF
  STORE IR+1 TO IR


STORE DETALLE TO VDETALLE
STORE CODIGBARRA TO VCODIGBARRA
STORE PCOSTO TO VPCOSTO
STORE GANANCIA TO VGANANCIA
STORE SINIVA TO VSINIVA
STORE CONIVA TO VCONIVA
STORE VAL(VCODIGBARRA) TO VCODIGBARRA


USE MERNEW
APPEND BLANK

REPLACE CODIGO WITH IR
REPLACE DETALLE WITH VDETALLE
REPLACE CODIGBARRA WITH VCODIGBARRA
REPLACE PCOSTO WITH VPCOSTO
REPLACE GANANCIA WITH VGANANCIA
REPLACE SINIVA WITH VSINIVA
REPLACE CONIVA WITH VCONIVA


LOOP
ENDDO

